<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile - Smart Bus Attendance</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="logo">üöå Smart Bus Attendance</h1>
            <p class="tagline">Edit Your Profile</p>
        </header>

        <!-- Edit Profile Form -->
        <div class="form-container">
            <h2>Edit Your Profile</h2>
            <p style="text-align: center; color: #718096; margin-bottom: 30px;">Update your personal information</p>
            
            <form action="{{ url_for('update_profile') }}" method="POST" enctype="multipart/form-data">
                <!-- Personal Information -->
                <div class="form-section">
                    <h3 style="color: #2d3748; margin-bottom: 20px; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px;">Personal Information</h3>
                    
                    <div class="form-group">
                        <label for="name">Full Name *</label>
                        <input type="text" id="name" name="name" value="{{ student.name }}" required placeholder="Enter your full name">
                    </div>

                    <div class="form-group">
                        <label for="roll_number">Roll Number *</label>
                        <input type="text" id="roll_number" name="roll_number" value="{{ student.roll_number }}" readonly style="background: #f7fafc;">
                        <small style="color: #718096;">Roll number cannot be changed</small>
                    </div>

                    <div class="form-group">
                        <label for="university_id">University ID *</label>
                        <input type="text" id="university_id" name="university_id" value="{{ student.university_id }}" readonly style="background: #f7fafc;">
                        <small style="color: #718096;">University ID cannot be changed</small>
                    </div>

                    <div class="form-group">
                        <label for="bus_number">Bus Number *</label>
                        <select id="bus_number" name="bus_number" required>
                            <option value="BUS001" {% if student.bus_number == 'BUS001' %}selected{% endif %}>Bus 001</option>
                            <option value="BUS002" {% if student.bus_number == 'BUS002' %}selected{% endif %}>Bus 002</option>
                            <option value="BUS003" {% if student.bus_number == 'BUS003' %}selected{% endif %}>Bus 003</option>
                            <option value="BUS004" {% if student.bus_number == 'BUS004' %}selected{% endif %}>Bus 004</option>
                            <option value="BUS005" {% if student.bus_number == 'BUS005' %}selected{% endif %}>Bus 005</option>
                            <option value="BUS006" {% if student.bus_number == 'BUS006' %}selected{% endif %}>Bus 006</option>
                            <option value="BUS007" {% if student.bus_number == 'BUS007' %}selected{% endif %}>Bus 007</option>
                            <option value="BUS008" {% if student.bus_number == 'BUS008' %}selected{% endif %}>Bus 008</option>
                            <option value="BUS009" {% if student.bus_number == 'BUS009' %}selected{% endif %}>Bus 009</option>
                            <option value="BUS010" {% if student.bus_number == 'BUS010' %}selected{% endif %}>Bus 010</option>
                        </select>
                    </div>
                </div>

                <!-- Profile Photo -->
                <div class="form-section">
                    <h3 style="color: #2d3748; margin-bottom: 20px; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px;">Profile Photo</h3>
                    
                    <div class="form-group">
                        <label>Current Photo</label>
                        <div style="text-align: center; margin: 20px 0;">
                            {% if student.photo_path %}
                                <img src="{{ student.photo_path }}" alt="Current Photo" style="max-width: 200px; border-radius: 10px; border: 2px solid #e2e8f0;">
                            {% else %}
                                <div style="padding: 40px; background: #f7fafc; border-radius: 10px; color: #718096;">
                                    No photo uploaded
                                </div>
                            {% endif %}
                        </div>
                        
                        <label for="photo">Update Photo</label>
                        <input type="file" id="photo" name="photo" accept=".jpg,.jpeg,.png">
                        <small style="color: #718096;">Upload a new JPG, JPEG, or PNG image for face recognition</small>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">
                        üíæ Save Changes
                    </button>
                    <a href="{{ url_for('student_dashboard') }}" class="btn btn-secondary" style="flex: 1; text-align: center;">
                        ‚Üê Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
</body>
</html>